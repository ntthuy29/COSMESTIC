@using System.Web
@model COSMESTIC.Models.Data.Orders

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://kit.fontawesome.com/your-fontawesome-kit.js" crossorigin="anonymous"></script>

<div class="container-sm my-5 px-3" style="max-width: 800px;">
    <!-- Nút điều hướng -->
    <div style="position: fixed; top: 180px; left: 20px; z-index: 1000;">
        <a href="@Url.Action("Index", "Home")" class="btn btn-outline-danger px-3 py-2 custom-home-btn">
            <i class="fas fa-home me-2"></i>Về trang chủ
        </a>
    </div>

    <!-- Header -->
    <div class="text-center mb-4 p-4 rounded-3" style="background: linear-gradient(to right, #f3f4f6, #e5e7eb); margin-top: 60px;">
        <div class="display-4 mb-2">🎉</div>
        <h2 class="fw-bold  mb-2" style="color: #CC3300;">ĐẶT HÀNG THÀNH CÔNG!</h2>
        <p class="text-muted">Cảm ơn bạn đã mua sắm tại COSMESTIC</p>
    </div>

    <!-- Card chính -->
    <div class="card border-0 shadow rounded-3 overflow-hidden">
        <div class="card-body p-4">
            <!-- Thông tin khách hàng & thanh toán -->
            <div class="row g-4 mb-4">
                <div class="col-md-6">
                    <h5 class="fw-bold  mb-3" style="color: #FF6600">
                        <i class="fas fa-user me-2"></i>THÔNG TIN KHÁCH HÀNG
                    </h5>
                    <p class="mb-2 small" style="font-size: 20px;"><strong>Họ tên:</strong> @Html.Raw(HttpUtility.HtmlDecode(@Model.Delivery.deliveryName))</p>
                    <p class="mb-2 small"><strong>Điện thoại:</strong> @Html.Raw(HttpUtility.HtmlDecode(@Model.Delivery.deliveryPhone))</p>
                    <p class="mb-0 small"><strong>Địa chỉ:</strong> @Html.Raw(HttpUtility.HtmlDecode(@Model.Delivery.deliveryAddress))</p>
                </div>
                <div class="col-md-6">
                    <h5 class="fw-bold  mb-3" style="color: #FF6600">
                        <i class="fas fa-receipt me-2"></i>THÔNG TIN THANH TOÁN
                    </h5>
                    <p class="mb-2 small">
                        <strong>Phương thức:</strong>
                        @if (Model.payMethod == "cash")
                        {
                            <span class="badge text-bg-success">Tiền mặt</span>
                        }
                        else if (Model.payMethod == "momo")
                        {
                            <span class="badge text-bg-primary">Momo</span>
                        }
                        else
                        {
                            <span class="badge text-bg-secondary">Chuyển khoản</span>
                        }
                    </p>
                    @if (!string.IsNullOrEmpty(Model.note))
                    {
                        <p class="mb-0 small"><strong>Ghi chú:</strong> @Html.Raw(HttpUtility.HtmlDecode(Model.note))</p>
                    }
                </div>
            </div>

            <!-- Bảng sản phẩm -->
            <h5 class="fw-bold  mb-3" style="color:#FF6600">
                <i class="fas fa-boxes me-2"></i>CHI TIẾT ĐƠN HÀNG
            </h5>
            <div class="table-responsive">
                <table class="table table-hover table-sm align-middle">
                    <thead class="table-light">
                        <tr>
                            <th style="width: 80px;">Ảnh</th>
                            <th>Sản phẩm</th>
                            <th class="text-center" style="width: 100px;">SL</th>
                            <th class="text-end" style="width: 120px;">Đơn giá</th>
                            <th class="text-end" style="width: 120px;">Thành tiền</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.orderDetails)
                        {
                            <tr>
                                <td>
                                    <img src="@Url.Content("~/" + item.products.imagePath)" class="rounded" style="width: 50px; height: 50px; object-fit: cover;">
                                </td>
                                <td>@item.products.productName</td>
                                <td class="text-center">@item.quantity</td>
                                <td class="text-end">@item.unitPrice.ToString("N0") ₫</td>
                                <td class="text-end fw-semibold">@((item.quantity * item.unitPrice).ToString("N0")) ₫</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <!-- Tổng tiền -->
            <div class="d-flex justify-content-end mt-4">
                <div class="border-top pt-3" style="width: 250px;">
                    <div class="d-flex justify-content-between">
                        <span class="fw-bold">Tổng cộng:</span>
                        <span class="fw-bold text-danger fs-5">@Model.totalAmount.ToString("N0") ₫</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .card {
        transition: all 0.3s ease;
    }

        .card:hover {
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1) !important;
        }

    .badge {
        font-size: 0.75em;
    }

    .custom-home-btn {
        color: #dc3545 !important;
    }

        .custom-home-btn:hover {
            color: #fff !important;
        }
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>